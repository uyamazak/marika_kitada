(function(e){function t(t){for(var a,l,o=t[0],s=t[1],c=t[2],d=0,f=[];d<o.length;d++)l=o[d],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&f.push(r[l][0]),r[l]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);u&&u(t);while(f.length)f.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],a=!0,o=1;o<i.length;o++){var s=i[o];0!==r[s]&&(a=!1)}a&&(n.splice(t--,1),e=l(l.s=i[0]))}return e}var a={},r={app:0},n=[];function l(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=e,l.c=a,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(i,a,function(t){return e[t]}.bind(null,a));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/marika_kitada/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=s;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("v-app",[i("v-app-bar",{attrs:{app:"",color:"indigo",dark:""}},[i("v-toolbar-title",[e._v("@marika_kitada")])],1),i("v-main",[i("v-container",{attrs:{fluid:""}},[i("v-row",[i("v-col",{attrs:{lg:"10"}},[i("v-stage",{ref:"stage",attrs:{id:"stage",config:e.configStage}},[i("v-layer",[i("v-group",{ref:"backgounrd"},[i("v-rect",{attrs:{config:{x:0,y:0,width:1280,height:780,fill:"#f5f5f5"}}}),i("v-image",{ref:"bg",attrs:{config:{image:e.backgroundImage,width:1280,height:780}}})],1),i("v-group",{ref:"bgNumbers"},[i("v-text",{attrs:{config:{x:50,y:80,width:150,height:110,text:"現在値",fontStyle:"bold",align:"left",fontSize:45,lineHeight:1,fill:"white"}}}),i("v-text",{attrs:{config:e.configStockPrice}}),i("v-text",{attrs:{config:e.configClock}})],1),i("v-group",{ref:"marikaGroup",attrs:{config:e.configMarika}},[i("v-rect",{ref:"eyeBg",attrs:{config:{x:600,y:450,width:500,height:300,fill:"#fff"}}}),i("v-image",{ref:"eyes",attrs:{config:{image:e.eyesImage,x:e.eyeX,y:e.eyeY}}}),i("v-image",{ref:"body",attrs:{config:{image:e.bodyImage}}})],1),i("v-group",{ref:"subtitle"},[i("v-text",{attrs:{config:e.configSubtitle}})],1)],1)],1)],1),i("v-col",{attrs:{lg:"2"}},[i("v-list",[i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",[e._v("eyeX: "+e._s(e.eyeX))]),i("v-slider",{staticClass:"align-center",attrs:{max:60,min:-70,step:"0.1"},model:{value:e.eyeX,callback:function(t){e.eyeX=t},expression:"eyeX"}}),i("v-list-item-title",[e._v("eyeY: "+e._s(e.eyeY))]),i("v-slider",{staticClass:"align-center",attrs:{max:70,min:-70,step:"0.1"},model:{value:e.eyeY,callback:function(t){e.eyeY=t},expression:"eyeY"}}),i("v-btn",{on:{click:function(t){return e.toggleEyeTremble()}}},[e._v(" Eye Tremble ")])],1)],1),i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",[e._v(" marikaX: "+e._s(e.marikaX)+" ")]),i("v-slider",{staticClass:"align-center",attrs:{max:1400,min:-400,step:"1"},model:{value:e.marikaX,callback:function(t){e.marikaX=t},expression:"marikaX"}})],1)],1),i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",[e._v(" marikaY: "+e._s(e.marikaY)+" ")]),i("v-slider",{staticClass:"align-center",attrs:{max:800,min:-800,step:"1"},model:{value:e.marikaY,callback:function(t){e.marikaY=t},expression:"marikaY"}})],1)],1),i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",[e._v(" marikaScale: "+e._s(e.marikaScale)+" ")]),i("v-slider",{staticClass:"align-center",attrs:{max:1,min:.1,step:"0.01"},model:{value:e.marikaScale,callback:function(t){e.marikaScale=t},expression:"marikaScale"}})],1)],1),i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",[e._v(" subtitle ")]),i("v-textarea",{model:{value:e.subtitleText,callback:function(t){e.subtitleText=t},expression:"subtitleText"}}),i("v-select",{attrs:{items:["left","center","right"],label:"Align"},model:{value:e.subtitleAlign,callback:function(t){e.subtitleAlign=t},expression:"subtitleAlign"}})],1)],1),i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",[e._v(" 録画 "+e._s(e.recorderState)+" ")]),i("v-btn",{attrs:{disabled:e.isRecording},on:{click:e.start}},[e._v(" start ")]),i("v-btn",{attrs:{disabled:!e.isRecording},on:{click:e.stop}},[e._v(" stop ")]),e.movieData?i("v-btn",{attrs:{href:e.movieData,download:"movie.webm"}},[e._v(" download ")]):e._e()],1)],1),i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",[e._v(" Filter ")]),e._l(e.allFilters,(function(t,a){return i("v-checkbox",{key:a,attrs:{label:t,value:t},model:{value:e.selectedFilters,callback:function(t){e.selectedFilters=t},expression:"selectedFilters"}})})),i("v-btn",{on:{click:e.applyFilter}},[e._v(" apply Filter ")])],2)],1)],1)],1)],1)],1)],1),i("v-footer",{attrs:{app:""}},[i("a",{attrs:{href:"https://twitter.com/marika_kitada",target:"_blank"}},[e._v("twitter")])])],1)],1)},n=[],l=(i("99af"),i("4160"),i("d81d"),i("fb6a"),i("d3b7"),i("3ca3"),i("159b"),i("ddb0"),i("2b3d"),i("96cf"),i("1da1")),o=i("362d"),s=i.n(o),c=i("d4ec"),u=i("bee2"),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:88675123;Object(c["a"])(this,e),this.x=123456789,this.y=362436069,this.z=521288629,this.w=t}return Object(u["a"])(e,[{key:"next",value:function(){var e=this.x^this.x<<11;return this.x=this.y,this.y=this.z,this.z=this.w,this.w=this.w^this.w>>>19^e^e>>>8,this.w}},{key:"nextInt",value:function(e,t){var i=Math.abs(this.next());return e+i%(t+1-e)}}]),e}(),f="/marika_kitada/images/",v=function(e){return("0"+e).slice(-2)};function m(e){return new Promise((function(t,i){var a=new Image;a.src=f+e,a.onload=function(){return t(a)},a.onerror=i}))}var h={marikaX:240,marikaY:43,marikaScale:.46,eyeX:0,eyeY:0,eyeTremble:.9},g={name:"App",components:{},data:function(){return{drawer:!0,bodyImage:null,eyesImage:null,backgroundImage:null,stageWidth:1280,stageHeight:720,stageScale:1,marikaX:h.marikaX,marikaY:h.marikaY,marikaScale:h.marikaScale,eyeX:h.eyeX,eyeY:h.eyeY,stream:null,recorder:null,recorderState:null,movieData:null,eyeTrembleIntervalId:null,subtitleText:"おはぎゃー、北田まりかです",subtitleAlign:"left",selectedFilters:[],stockPrice:0,setStockPriceIntervalId:null,clock:"12:34.56",clockIntervalId:null}},computed:{configStage:function(){return{width:this.stageWidth,height:this.stageHeight,scale:{x:this.stageScale,y:this.stageScale}}},configMarika:function(){return{x:this.marikaX,y:this.marikaY,scale:{x:this.marikaScale,y:this.marikaScale}}},configSubtitle:function(){return{x:60,y:570,width:1180,height:110,text:this.subtitleText,align:this.subtitleAlign,fontSize:42,fontStyle:"bold",lineHeight:1.2,fill:"red",stroke:"white",strokeWidth:.2,shadowEnabled:!0,shadowColor:"white",shadowBlur:1,shadowOffset:{x:2,y:2},shadowOpacity:1}},configStockPrice:function(){return{x:270,y:81,width:220,height:110,text:this.stockPrice/100,align:"right",fontSize:48,lineHeight:1,fill:"white"}},configClock:function(){return{x:740,y:30,width:500,height:110,text:this.clock,align:"right",fontSize:100,fontFamily:"monospace",fontStyle:"bold",lineHeight:1,fill:"black"}},isRecording:function(){return"recording"===this.recorderState},allFilters:function(){return["Pixelate","Invert","Blur","Grayscale","Sepia","Solarize","Noise"]},filters:function(){return this.selectedFilters.map((function(e){return s.a.Filters[e]}))}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m("bg.jpg");case 2:return e.backgroundImage=t.sent,t.next=5,m("hitomi.png");case 5:return e.eyesImage=t.sent,t.next=8,m("karada.png");case 8:e.bodyImage=t.sent,e.$refs.eyes.getNode().moveToBottom(),e.recoderInit(),e.toggleEyeTremble(),e.enableStockPrice(),e.enableClock();case 14:case"end":return t.stop()}}),t)})))()},created:function(){this.updateStockPrice(),console.log("MediaRecorder.isTypeSupported: ",MediaRecorder.isTypeSupported("video/mp4"))},destroyed:function(){clearInterval(this.eyeTrembleIntervalId),clearInterval(this.setStockPriceDiffIntervalId),clearInterval(this.clockIntervalId)},methods:{start:function(){console.log("start"),this.movieData=null,this.recorder.start(),this.updateRecorderState(),console.log(this.recorder)},stop:function(){console.log("stop"),this.recorder.stop(),this.updateRecorderState(),console.log(this.recorder)},recoderInit:function(){var e=this;this.stream=document.getElementsByTagName("canvas")[0].captureStream(),this.recorder=new MediaRecorder(this.stream,{mimeType:"video/webm;codecs=vp9"}),this.recorder.ondataavailable=function(t){console.log("ondataavailable",t);var i=new Blob([t.data],{type:t.data.type});e.movieData=window.URL.createObjectURL(i)},this.updateRecorderState(),console.log(this.stream)},updateRecorderState:function(){this.recorder&&(this.recorderState=this.recorder.state)},toggleEyeTremble:function(){var e=this;if(this.eyeTrembleIntervalId)return clearInterval(this.eyeTrembleIntervalId),void(this.eyeTrembleIntervalId=null);this.eyeTrembleIntervalId=setInterval((function(){var t=h.eyeTremble,i=-h.eyeTremble;e.eyeX+=Math.random()*(t-i)+i,e.eyeY+=Math.random()*(t-i)+i}),250)},updateSubtitle:function(){this.$refs.subtitle.getNode().draw()},applyFilter:function(){var e=this;[this.$refs.eyes,this.$refs.body,this.$refs.eyeBg].forEach((function(t){t.getNode().cache().filters(e.filters).pixelSize(25).blurRadius(25).levels(.5).noise(.7)}))},updateStockPrice:function(){var e=4e6,t=-1e6,i=new Date,a=new d(100*i.getTime());this.stockPrice=a.nextInt(t,e)},updateClock:function(){var e=new Date,t=v(e.getHours()),i=v(e.getMinutes()),a=v(e.getSeconds());this.clock="".concat(t,":").concat(i,":").concat(a)},enableStockPrice:function(){this.setStockPriceIntervalId=setInterval(this.updateStockPrice,5e3)},enableClock:function(){this.clockIntervalId=setInterval(this.updateClock,999)}}},p=g,b=i("2877"),y=i("6544"),k=i.n(y),x=i("7496"),w=i("40dc"),S=i("8336"),I=i("ac7c"),_=i("62ad"),T=i("a523"),P=i("553a"),X=i("8860"),Y=i("da13"),O=i("5d23"),V=i("f6c4"),C=i("0fd9"),R=i("b974"),j=i("ba0d"),F=i("a844"),M=i("2a7f"),z=Object(b["a"])(p,r,n,!1,null,null,null),A=z.exports;k()(z,{VApp:x["a"],VAppBar:w["a"],VBtn:S["a"],VCheckbox:I["a"],VCol:_["a"],VContainer:T["a"],VFooter:P["a"],VList:X["a"],VListItem:Y["a"],VListItemContent:O["a"],VListItemTitle:O["b"],VMain:V["a"],VRow:C["a"],VSelect:R["a"],VSlider:j["a"],VTextarea:F["a"],VToolbarTitle:M["a"]});var B=i("7591"),D=i.n(B),E=i("f309");a["default"].use(E["a"]);var H=new E["a"]({});a["default"].config.productionTip=!1,a["default"].use(D.a),new a["default"]({vuetify:H,render:function(e){return e(A)}}).$mount("#app")}});
//# sourceMappingURL=app.23507a73.js.map